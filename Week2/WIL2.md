Week2. 모던 자바스크립트 입문 8~15장

8장. 함수

- 함수를 정의하는 방법 :

1. 함수 선언문으로 정의하는 방법
   function square(x) { return x\*x; }
2. 함수 리터럴로 정의하는 방법
   var square = function(x) { return x\*x; };
3. Function 생성자로 정의하는 방법
   var square = new Function(x) { “x”, “return x\*x” };
4. 화살표 함수 표현식으로 정의하는 방법
   var square = x => x\*x;
   2,3,4의 방법으로 함수를 정의하는 코드는 호출하는 코드보다 앞에 위치해야 한다.

- 중첩 함수 : 특정 함수의 내부에 선언된 함수. C나 Java에서는 사용 불가, JS에서는 함수의 최상위 레벨에만 작성할 수 있다.
- 함수를 호출하는 방법 :

1. 함수 호출
   var s = square(5);
2. 메서드 호출
   obj.m=junction() {...};
   obj.m();
3. 생성자 호출
   var obj = new Object();
4. call, apply를 사용한 간접 호출

- 즉시 실행 함수 : 익명 함수를 정의하고 곧바로 실행하는 구문

- 함수의 인수 : JS는 함수를 호출할 때 인수를 생략할 수 있고 반대로 함수 정의식에 작성된 인자 개수보다 더 많은 개수의 인자를 넘겨서 함수를 실행할 수 있다.
- 인수의 생략 : 함수 정의식에 작성된 인자 개수보다 인자를 적게 전달해서 함수를 실행하면 인수에서 생략한 인자는 undefined가 된다. 이런 성질을 활용해 호출할 때 초깃값을 설정하고 인수를 생략할 수 있는 함수를 정의할 수 있다.
- 가변 길이 인수 목록 (Arguments 객체) : 모든 함수에서 사용할 수 있는 지역 변수인 arguments 변수의 값, 유사 배열 객체. 함수에 인수를 n개 넘겨서 호출하면 argument[0]부터 argument[n-1]에 인수 값들이 저장된다. Arguments 객체는 프로퍼티로 length와 callee를 갖고 있다.

- 재귀 함수 : 함수가 자기 자신을 호출하는 재귀 호출을 수행하는 함수.
  -> 유의사항 : 1. 재귀 호출은 반드시 멈춰야 한다. 2. 재귀 호출로 문제를 간단하게 해결할 수 있을 때만 사용한다. ex) 하노이의 탑 문제

- 프로그램의 평가와 실행 과정
- 자바스크립트 엔진은 실행 가능한 코드를 만나면 그 코드를 평가해서 실행 문맥으로 만든다. 실행 가능한 코드 : 전역 코드(전역 객체 Window 아래에 정의된 함수), 함수 코드(함수), eval 함수(eval 함수).
- 실행 문맥은 실행 가능한 코드가 실제로 실행되고 관리되는 영역으로 실행에 필요한 모든 정보를 컴포넌트 여러 개가 나누어 관리하도록 만들어졌다. 그 중 중요한 컴포넌트는 렉시컬 환경 컴포넌트, 변수 환경 컴포넌트, 디스 바인딩 컴포넌트.
- 렉시컬 환경 컴포넌트 : JS 엔진이 JS 코드를 실행하기 위해 자원을 모아둔 곳. 해당 JS 코드의 유효 범위 안에 있는 식별자와 그 식별자가 가리키는 값을 키와 값의 쌍으로 바인드 해 렉시컬 환경 컴포넌트에 기록한다. 환경 레코드와 외부 렉시컬 환경 참조 컴퍼넌트로 구성되어 있고, 그 중 환경 레코드는 선언적 환경 레코드(식별자와 실행 결과를 키와 값의 쌍으로 관리)와 객체 환경 레코드(외부에 별도로 저장된 객체의 참조에서 데이터를 읽거나 씀)로 구성되어 있다.
- JS 인터프리터는 렉시컬 환경 타입의 전역 환경을 생성한다. 전역 객체 생성 후 JS 프로그램을 읽어 들인다. 그 후 프로그램을 평가하며 최상위 레벨에 var 문으로 작성한 전역 변수는 전역 환경의 환경 레코드에 프로퍼티로 기록한다. (즉 전역 변수의 실체는 전역 객체의 프로퍼티 또는 전역 객체의 실행 문맥에 들어있는 환경 레코드의 프로퍼티) 프로그램이 평가된 후 프로그램은 실행 문맥 안에서 실행된다. 프로그램을 실행하는 방식에는 싱글 스레드 방식과 멀티 스레드 방식이 있다.
- 스레드 : 프로그램의 처리 흐름
- 싱글 스레드 방식은 프로그램 한 개의 처리 흐름으로 프로그램을 순차적 실행, 멀티 스레드 방식은 프로그램 여러개의 처리 흐름으로 동시에 여러 개 병렬로 실행하는 방식이다. JS는 작업을 싱글 스레드로 처리한다.

- this 값 : 함수가 호출되었을 때 그 함수가 속해 있던 객체의 참조
- 식별자 결정 : 변수 이름이 동일 해 충돌이 발생할 때 어디에서 선언된 변수인지 결정하는 작업. JS의 식별자 결정 규칙은 좀 더 안쪽 코드에 선언된 변수를 사용한다 이다.
- 클로저(closure, 함수 폐포) : 자기 자신이 정의된 환경에서 함수 안에 있는 자유 변수의 식별자 결정을 실행하는 함수와, 그 기능을 구현한 자료 구조의 모음. JS의 클로저는 함수 객체와 렉시컬 환경 컴포넌트의 집합. 클로저는 사용하면 데이터와 데이터를 조작하는 함수를 하나로 묶을 수 있다. / 관련 예제 1. 여러 개의 내부 상태와 메서드를 가진 클로저 2. 함수 팩토리 3. 초기화 기능이 추가된 함수 생성하기
- 이름 공간 : 변수 이름과 함수 이름을 한 곳에 모아두어 이름 충돌을 미리 방지하고 변수와 함수를 쉽게 가져다 쓸 수 있게 만든 메커니즘. JS에서는 기본적으로 이름 공간 기능을 제공하지 않지만 객체를 값으로 가지는 전역 변수를 하나 생성, 그 객체에 프로그램 전체에서 사용하는 모든 변수와 함수를 프로퍼티로 정의해 이름 공간으로 사용할 수 있다. 함수 안에서 선언된 변수의 유효 범위는 함수 내부라는 성질을 활용하면 함수를 이름 공간으로 사용할 수도 있다.

- 함수의 프로퍼티 ; caller(현재 실행 중인 함수를 호출한 함수), length(함수의 인자 개수), name(함수를 표시할 때 사용하는 이름), prototype(프로토타입 객체의 참조)
- 함수는 Function생성자의 prototype 객체의 프로퍼티를 상속 받아서 사용한다. Funtion.prototype의 프로퍼티 : apply(), bind(), call(), constructor, toString()
- 고차 함수 : 함수를 인수로 받는 함수 또는 함수를 반환하는 함수. 고차 함수를 사용하면 패턴이 같은 작업을 추상화하여 하나로 합칠 수 있다. / 예제 : 메모이제이션, 함수의 합성, 부분 적용, 커링
- 콜백 함수 : 다른 함수에 인수로 넘겨지는 함수. 함수를 호출할 때 무언가 새로운 일이 생기거나 그 함수의 실행이 끝나면 지정한 콜백 함수를 실행해 주도록 함수를 요청해야 할 때 사용한다. / 예제 : 이벤트 처리기, 타이머

9장. 객체

- 객체의 생성

1. 객체 리터럴로 생성하는 방법
   var card = { suit : “하트”, rank : “A” };
2. 생성자로 생성하는 방법
   function Card(suit, rank) {
   this.suit = suit;
   this.rank = rank;
   }
3. Object.create로 생성하는 방법

- 생성자 안에서 this 뒤에 메서드를 정의하면 그 생성자로 생성한 모든 인스턴스에 똑같은 메서드가 추가되며 메모리를 낭비하게 되는 문제점이 있다.
- 프로토타입 객체 : JS에서는 함수도 객체이므로 함수 객체가 기본적으로 prototype 프로퍼티를 가지고 있다. 프로토타입 객체의 프토퍼티는 생성자로 생성한 모든 인스턴스에서 그 인스턴스의 프로퍼티처럼 사용할 수 있다.
- 볼 애니메이션 (예제 9-1) 실습
- 프로토타입에 메서드 정의하기 : 인스턴스 안에 메서드가 존재하지 않아도 메서드를 사용할 수 있다. 또한 메서드 안의 this는 생성한 인스턴스를 가리킨다.

- 프로토타입 상속 : JS에서 상속은 프로토타입 체인으로 구현. 객체의 **proto**속성은 부모 객체(원형 객체)를 가르킨다. 속성값을 찾을 수 없으면 프로토타입을 거슬러 올라가 속성 값을 찾아 실행한다.
- 프로토타입 객체의 프로퍼티 : 함수를 정의하면 prototype 속성을 가지는데 prototype 속성은 constructor와 **proto**를 포함한다.
- 함수와 함수의 프로토타입 객체는 서로를 참조하고 있다. 함수의 prototype 속성이 프로토타입 객체를 가리키고, 이 프로토타입 객체의 constructor 프로퍼티가 함수를 가리킨다. 반면 생성자(함수)로 생성한 인스턴스는 프로토타입의 객체만 참조하고 생성자(함수)와는 연결고리가 없다. 대신 프로토타입을 통해 constructor 속성을 상속받기 때문에 생성자에 접근할 수 있다.
- 인스턴스는 생성시점의 생성자의 프로토타입을 상속받는다. 즉, 생성 이후 생성자의 프로토타입을 수정하면 인스턴스에는 반영되지 않는다.

- **proto**와 prototype 속성 : **proto**는 모든 객체가 가지는 속성, 부모 객체의 prototype 속성을 가리킨다. prototype 속성은 함수객체만 가지고 있으며 자신의 prototype 객체로서 자식 객체가 **proto** 속성으로 이를 참조한다.
- Obejct.prototype은 프로토타입 체이닝으로 모든 객체에 포함된다. 따라서 모든 객체에서 Obejct.prototype의 속성을 사용할 수 있다.

- 접근자 Getter, Setter : 객체는 값을 저장하기 위한 데이터 속성과 속성을 읽고 쓸 때 호출하는 함수를 지정하는 접근자 속성.
- 프로퍼티가 있는지 확인, 프로퍼티 열거, 객체 잠그기(객체를 수정할 수 없게 함), Mixin(서로 다른 객체의 속성들을 뒤섞는 것 <-> 상속), JSON(네트워크를 통해 데이터를 주고 받을 때 사용하는 데이터 포맷)

10장. 배열의 다양한 기능

- 배열 (Array.prototype)의 메서드 목록
- 수정 메서드 / push 메서드 : 배열 마지막에 하나 이상의 요소를 추가한 다음 그 배열의 길이를 반환한다. pop 메서드 : 배열의 마지막 요소를 잘라내어 반환한다. shift 메서드 : 배열의 첫 번째 요소를 제거한 후 모든 배열 요소를 왼쪽으로 이동한다. 반환 값은 삭제된 요소의 값. unshift 메서드 : 배열 앞부분에 요소를 한 개 이상 추가한 후 모든 배열 요소를 오른쪽으로 이동한다. 반환값은 그 배열의 길이. splice 메서드 : 특정 인덱스의 배열 요소를 갈아 끼울 때 사용하는 범용 메서드. sort 메서드 : 배열 안의 요소를 정렬한다.
- 접근자 메서드 : 배열을 다른 모습으로 가공한 새로운 배열을 반환하며 원래 배열은 수정하지 않는다. ex) join, concat, slice, indexOf, lastIndexOf, toString, toLocaleString 메서드
- 반복 메서드 :배열의 모든 요소를 순회하며 특정한 작업을 수행하거나 특정 조건을 만족하는 요소를 가져올 때 사용하는 메서드. 반복 메서드의 대부분은 첫 번째 인수로 함수의 참조를 받는 고차 함수이다. ex) forEach, map, reduce 메서드
- 다차원 배열 : JS에서는 배열에 배열을 중첩하는 방식으로 다차원 배열과 비슷한 기능을 구현할 수 있다.
- 유사 배열 객체 : Array 타입 객체의 성질 중 (1. 0 이상의 정수 값을 프로퍼티 이름으로 가짐 2. length 프로퍼티가 있으며 요소를 추가하거나 삭제하면 그 값이 바뀜. 또한 그 값을 줄이면 그에 따라 배열 크기가 줄어듦 3. 프로토타입이 Array.prototype이므로 이의 메서드를 상속받아서 사용할 수 있음) 프로퍼티 이름이 0 이상의 정수이며 length 프로퍼티가 있는 객체는 대부분 배열로 다룰 수 있으며, 이러한 객체를 유사 배열 객체라고 한다.

11장. 버그와 오류에 대처하는 방법

- 버그의 원인 :
- 1. 논리적인 버그 : 프로그램의 바탕이 되는 알고리즘 자체에 오류가 있거나 알고리즘을 프로그램으로 구현하는 방법이 잘못 되었을 때 발생한다.
- 2. 오타 : 개발자가 의도하지 않은 동작을 유발하며 작은 오타도 프로그램에 심각한 오류를 발생시킬 가능성이 있다.
- 3. 실행 환경의 변화 : 컴퓨터, OS, 프로그래밍 언어 자체의 사양이 바뀌어 프로그램이 동작하지 않는 경우도 있다.
- 디버깅 관련 :
- Strict 모드 사용 : ECMAScipt부터 추가된 모드로 JS 언어의 사양 중 버그를 일으키기 쉬운 부분을 제거한다. 프로그램을 Strict 모드로 실행하려면 스크립트의 첫머리 또는 함수의 첫머리에 "use strict";을 입력한다.
- Console 디버깅 : 프로그램의 특정 위치에서 Console 객체의 메서드를 실행하면 그 시점의 프로그램 상태를 확인할 수 있다.
- 웹 브라우저의 개발자 도구를 사용한 디버깅
- 프로그램 테스트 : 프로그램이 의도한 대로 동작하는지 확인하는 작업. 다음 공정에 따라 단계적으로 실시한다. 1. 단위 테스트 2. 통합 테스트 3. 시스템 테스트 4. 운용 테스트

- 예외 처리 :
- throw문 : 예외를 던진다. throw 표현식;
- Error 객체 : JS는 예외를 표현하기 위한 내장 객체가 일곱 개 준비되어 있다. 그 중 Error 객체는 범용적인 예외를 표현, 나머지는 특정 예외가 발생했을 때 표현하기 위한 객체이다.
- try/catch/finally문 : 예외가 던져졌을 때 그것을 잡아서 처리한다.
- try { 예외가 발생할 수 있는 코드 } catch(exception) { 예외가 발생했을 때 실행 } finally { try, catch 블록 코드 실행 이후 반드시 실행 }

12장. 정규 표현식

- 정규 표현식 : 문자열의 패턴을 표현하기 위한 도구. JS의 정규 표현식은 RegExp 객체로 표현한다. 정규 표현식은 RegExp 생성자 또는 정규 표현식 리터럴로 생성할 수 있다.
- 패턴 매칭 : 어떤 문자열이 정규 표현식이 표현하는 문자열의 패턴을 가지고 있을 때 그 문자열을 가리켜 정규표현식과 일치(Match)한다고 한다. 문자열이 정규 표현식과 일치하는지 확인하는 작업을 가리켜 패턴 매칭이라고 한다.
- RegExp 객체의 메서드 : ex) test 메서드 - 정규 표현식 문자열이 일치하는지 뜻하는 논리값을 반환한다. / exec 메서드 - 정규 표현식과 일치하는 문자열을 검색하여 일치한 문자열을 배열로 반환한다. 일치하는 문자열을 찾지 못했을 때는 null을 반환한다.
- 기본적인 정규 표현식 패턴 작성에 대해
- 패턴 매칭을 하는 문자열 메서드
- search 메서드 : 인수로 받은 정규 표현식 객체와 일치한 최초 문자열의 첫 번째 문자 위치를 반환, 일치하는 문자열을 찾지 못했을 때는 -1을 반환한다.
- replace 메서드 : 첫 번째 인수로 받은 정규 표현식과 일치하는 문자열을 검색하고, 두 번째 인수로 받은 문자열로 치환한 새로운 문자열을 반환한다.
- match 메서드 : 첫 번째 인수로 받은 정규 표현식과 일치하는 문자열을 순서대로 저장해서 배열로 반환한다.
- split 메서드 : 첫 번째 인수로 문자열을 분할한 다음에 배열에 담아서 반환한다.

  13장. 웹 브라우저의 체계

- 웹 브라우저에서 JS가 하는 일 :

1. 웹 페이지의 Document 객체 제어 (HTML 요소와 CSS 스타일 작업) - DOM이라는 API를 활용
2. 웹 페이지의 Window 객체 제어 및 브라우저 제어 - 웹 브라우저에 내장된 다양한 객체 활용 ex) Location, Navigator
3. 웹 페이지에서 발생하는 이벤트 처리 - 이벤트 처리기, 타이머
4. HTTP를 이용한 통신 제어 - XMLHttpRequest 객체 활용

- HTML에 JS 삽입하는 방법 : 1. script 요소의 내용물로 작성하기(인라인 스크립트), 2. 외부 파일 읽어 들이기(외부 스크립트), 3. 이벤트 처리기 속성에 작성하기, 4. JavaScript : URL(자바스크립트 의사 프로토콜)
- 웹 브라우저에서의 JS 실행 순서
- Location 객체 : 창에 표시되는 문서의 URL을 관리한다. window.location 또는 location으로 참조.
- History 객체 : 창의 웹 페이지 열람 이력을 관리한다. window.history 또는 history로 참조.
- Navigator 객체 : 스크립트가 실행 중인 웹 브라우저 등의 애플리케이션 정보를 관리한다. window.navigator 또는 navigator로 참조.
- Screen 객체 : 화면(모니터) 크기와 색상 등의 정보를 관리한다. window.screen 또는 screen으로 참조.
- Document 객체 : 창에 표시되고 있는 웹 페이지를 관리한다. 웹 페이지의 내용물인 DOM 트리를 읽거나 쓸 수 있다.
- 창 제어하기
- 웹 브라우저는 일반적으로 여러 개의 창과 탭을 표시하며, 각각의 창과 탭은 별도의 브라우징 컨텍스트를 제공한다. 각각의 브라우징 컨텍스트는 별도의 window 객체를 가진다. 새로운 창 또는 탭 열 때는 open 메서드를 사용한다. 열린 창을 닫을 때는 close 메서드를 사용한다. open 메서드로 연 창은 위치와 크기를 바꾸거나 스크롤 할 수 있다. 위치를 변경하려면 moveBy와 moveTo 메서드를 사용한다. 창에 표시되는 페이지를 스크롤 하려면 scrollBy와 scrollTo 메서드를 사용한다. 부모 창과 부모 창이 open 메서드로 연 자식 창은 서로의 Window 창을 참조할 수 있다.

14장. 문서 제어

- DOM 트리 : 웹 페이지의 내용은 Document 객체가 관리한다. 웹 브라우저가 웹 페이지를 읽어 들이면 렌더링 엔진은 웹 페이지의 HTMl 문서 구문을 해석하고 Document 객체에서 문서 내용을 관리하는 DOM 트리라고 하는 객체의 트리 구조를 만든다. DOM 트리를 구성하는 객체 하나를 노드라고 하며, 기본적인 노드는 세 가지이다. / 문서 노드 : 전체 노드를 가리키는 Document 객체, HTMl 요소 노드 : HTML 요소를 가리키는 객체, 텍스트 노드 : 텍스트를 가리키는 객체
- 노드 객체 가져오기 : id 속성으로 노드 가져오기, 요소의 이름으로 노드 가져오기, class 속성 값으로 노드 가져오기, name 속성 값으로 노드 가져오기, CSS 선택자로 노드 가져오기
- 속성 값의 읽기와 쓰기 : 요소 객체의 프로퍼티로 요소의 속성을 읽고 쓰기. / 요소 객체의 getAttribute 메서드는 요소의 속성을 가져오고, setAttribute 메서드는 요소의 속성을 설정한다. hasAttribute 메서드는 속성 이름을 받아 그 이름을 가진 속성이 있는지 알려주는 논리값을 반환하고 removeAttribute 메서드는 속성 이름을 받아 그 이름을 가진 속성을 삭제한다.
- HTML 요소의 내용을 읽고 쓰기 : innerHTML 프로퍼티, textContext와 innerText 프로퍼티
- 노드 생성/삽입/삭제하기 : 새로운 요소 노드 객체를 생성할 때는 createElement 메서드를 사용한다. 노드 객체를 DOM 트리에 삽입 할 때, 요소의 마지막에 삽입할 때는 appendChild 메서드를 사용한다. 지정한 자식 노드의 바로 앞에 삽입 할 때는 InsertBefore 노드를 사용한다. removeChild 메서드는 노드의 자식 노드를 삭제하고, replaceChild 메서드는 인수로 받은 자식 노드를 제거하고 새로운 노드로 치환한다.
- HTML 요소의 위치 : 요소 위치를 표현하기 위한 좌표계에는 1. 뷰 포트 좌표계와 2. 문서 좌표계가 있다.
- 폼 : form 요소를 작성하고 method 속성(데이터 전송 방법. "POST" 또는 "GET")과 action 속성(데이터는 처리하는 CGI 프로그램의 URL)을 지정한다.
- CSS 제어하기 : JS에서는 세 가지 방법으로 스타일을 제어할 수 있다. / 1. 요소 객체의 style 속성 값을 수정하는 방법, 2. 스타일 시트에 스타일을 클래스로 설정해 둔 다음 요소의 class 속성 값을 바꾸어 스타일을 전환하는 방법, 3. 스타일 시트를 수정하는 방법
- 14장 예제 폴더, 트럼프 카드 뒤집기 예제

15장. 이벤트 처리

- 이벤트 처리기를 등록하는 방법 :

1. HTML 요소의 이벤트 처리기 속성에 설정하는 방법
2. DOM 요소 객체의 이벤트 처리기 프로퍼티에 설정하는 방법
3. addEventListener 메서드를 사용하는 방법

- 이벤트 리스너를 등록하고 삭제하는 방법 : addEventListener 메서드로 이벤트 리스너를 등록하고 removeEventListener 메서드로 삭제한다.
- 이벤트 객체 : 이벤트 처리기와 이벤트 리스너는 이벤트 객체를 인수로 받는다. 이벤트 객체는 해당 이벤트의 다양한 정보를 저장한 프로퍼티와 이벤트 흐름을 제어하는 메서드를 가지고 있다.
- 이벤트의 단계 : HTML 요소에서는 클릭 등 사용자 행위와 프로그램 코드가 이벤트를 발생시킨다. 이벤트가 발생한 요소는 이벤트 타깃이라고 하고 이벤트를 발생시키는 것을 가리켜 이벤트를 발사한다고 표현하기도 한다. / 1. 캡처링 단계 2. 타깃 단계 3. 버블링 단계
- 자식 요소에서 발생한 이벤트는 부모 요소에도 전파된다. 이 때문에 의도하지 않은 동작을 할 때가 있다. stopPropagation 메서드로 이벤트의 전파를 취소할 수 있고, stopImmediatePropagation 메서드로 이벤트 전파의 일시정지를 할 수 있다. 또 preventDefault 메서드로 기본 동작을 취소할 수 있다.
- 이벤트 리스너 안의 this는 이벤트가 발생한 요소 객체. bind 메서드를 사용하는 방법, 익명 함수 안에서 실행하는 방법, 화살표 함수를 사용하는 방법 addEvnetListener의 두 번째 인수로 객체를 넘기는 방법으로 this가 원하는 객체를 가리키도록 설정할 수 있다.
- 커스텀 이벤트 : 객체 지향 프로그래밍에서 객체와 객체 사이의 관계를 느슨하게 연결하는 수단으로 사용되고 있다. click 이나 mousedown 등의 표준 이벤트 외에도 프로그램에서 사용할 독자적인 이벤트를 생성해서 원하는 타이밍에 발생시킬 수 있다. 표준 이벤트과 커스텀 이벤트는 이벤트 객체의 isTrusted 프로퍼티로 구별할 수 있다.
- 비동기 처리를 간결하게 작성하는 Promise
- 그림판 프로그램 만들기 예제 15-3
